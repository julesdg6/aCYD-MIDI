[platformio]
default_envs = esp32-2432S028Rv2
boards_dir = boards

[common]
platform = espressif32@6.10.0
framework = arduino
monitor_speed = 115200
monitor_port = /dev/cu.wchusbserial110
monitor_rts = 0
monitor_dtr = 0

build_flags = 
    -Ofast
    -D CORE_DEBUG_LEVEL=ARDUHAL_LOG_LEVEL_INFO
    -D LV_CONF_PATH=\"${platformio.include_dir}/lv_conf.h\"

lib_deps =
    me-no-dev/AsyncTCP@^3.3.2
    me-no-dev/ESPAsyncWebServer@^3.6.0

[env:esp32-2432S028R]
extends = common
board = esp32-2432S028R

[env:esp32-2432S028Rv2]
extends = common
board = esp32-2432S028Rv2
board_build.partitions = huge_app.csv
build_flags = 
    ${common.build_flags}
    # Default: UART2 (GPIO16/17) with debug enabled
    # Uncomment next line for UART0 (GPIO1/3) without debug:
    # -D HARDWARE_MIDI_UART=0
lib_deps = ${common.lib_deps}

# Development build with UART2 (GPIO16/17) - Debug enabled
[env:esp32-2432S028Rv2-uart2]
extends = common
board = esp32-2432S028Rv2
board_build.partitions = huge_app.csv

build_flags = 
    ${common.build_flags}
    -D HARDWARE_MIDI_UART=2

lib_deps = ${common.lib_deps}

# Production build with UART0 (GPIO1/3) - Debug disabled
[env:esp32-2432S028Rv2-uart0]
extends = common
board = esp32-2432S028Rv2
board_build.partitions = huge_app.csv

build_flags = 
    ${common.build_flags}
    -D HARDWARE_MIDI_UART=0

lib_deps = ${common.lib_deps}
